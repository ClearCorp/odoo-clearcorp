<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
    
		<!-- views -->
		<!-- ccorp.project.oerp.work.type -->
		<!-- form -->
		 <record id="view_work_type_form" model="ir.ui.view">
			<field name="name">view.worktype.form</field>
			<field name="model">ccorp.project.oerp.work.type</field>
			<field name="type">form</field>
            <field name="priority" eval="16" />
			<field name="arch" type="xml">
			<form>
			<group>
			  <group>
			  <field name="name"/>
			  <field name="product_id"/>
			  </group><group>
			  <field name="sequence" />
			  <field name="column_number" />
			  </group>
			  </group>
			  </form>
			</field>
		</record>
        
        <record id="view_work_type_tree" model="ir.ui.view">
            <field name="name">view.worktype.form</field>
            <field name="model">ccorp.project.oerp.work.type</field>
            <field name="priority" eval="16" />
            <field name="arch" type="xml">
                <tree string="Work Type Task">
                    <field name="name"/>
                    <field name="product_id"/>
                </tree>
            </field>
        </record>

		<!-- ccorp.project.scrum.feature -->
		<!-- form -->
		<record id="view_feature_form" model="ir.ui.view">
			<field name="name">view.feature.form</field>
			<field name="model">ccorp.project.scrum.feature</field>
			<field name="inherit_id" ref="ccorp_project_scrum.view_feature_form" />
			<field name="arch" type="xml">
				<xpath expr="//form/sheet/group/group/field[@name='expected_hours']"
					position="attributes">
					<attribute name="readonly">True</attribute>
					<attribute name="required">False</attribute>
				</xpath>
				<xpath expr="//form/sheet/notebook/page[@name='description']"
					position="after">
					<page string="Feature Hours" name="feature_hours">
						<field name="id" invisible="True" />
						<field name="hour_ids" context="{'feature_id': active_id}" attrs="{'readonly':[('state','=','approved')]}">
							<tree editable="bottom">
								<field name="work_type_id" />
								<field name="expected_hours" sum="Total Planned" />
								<field name="effective_hours" sum="Total Spent" />
								<field name="remaining_hours" sum="Total Remaining" />
							</tree>
						</field>
					</page>
                    <page string="Acceptance Requirements" name="acceptance_requirements">
                            <label for="acceptance_requirements_client" string="Please describe what you expect of this functionality"/>
                            <field name="acceptance_requirements_client"/>
                            <br/><br/>
                            <label for="acceptance_requirements_supplier" string="Please describe the functional analysis of this functionality"/>
                            <field name="acceptance_requirements_supplier"/>
                    </page>
                    <page string="Issue" name="issue" attrs="{'invisible':[('issue_id','=',False)]}">
                            <field name="issue_id"/>
                    </page>
				</xpath>
			</field>
		</record>

		<!-- project.task -->
		<!-- form -->
		<record id="view_task_form" model="ir.ui.view">
			<field name="name">view.task.form</field>
			<field name="model">project.task</field>
			<field name="inherit_id" ref="project.view_task_form2" />
			<field name="priority" eval="100" />
			<field name="arch" type="xml">
                <xpath expr="//form/sheet/group/group/field[@name='project_id']"
                    position="after">
                    <field name="kind_task_id"/>
                </xpath>
                <xpath expr="//form/sheet/notebook/page/group/group/field[@name='effective_hours']"
                    position="after">
                    <field name="reassignment_hour"/>
               </xpath>
				<xpath expr="//form/sheet/notebook/page[@name='sequence']"
					position="before">
					<page string="Feature Hours" name="feature_hours"
						attrs="{'invisible': [('feature_id','=',False)]}">
						<field name="feature_hour_ids">
							<tree>
								<field name="work_type_id" />
								<field name="expected_hours" sum="Planned Hour(s)" />
								<field name="effective_hours" sum="Spent Hour(s)" />
								<field name="remaining_hours" sum="Remaining Hour(s)" />
							</tree>
						</field>
					</page>
				</xpath>
			</field>
		</record>
        
        <record id="view_task_form_user" model="ir.ui.view">
            <field name="name">view.task.form</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2" />
            <field name="priority" eval="50" />
            <field name="arch" type="xml">
                <xpath expr="//form/sheet/group/group/field[@name='planned_hours']"
                        position="attributes">
                        <attribute name="readonly">True</attribute>
                </xpath>
              </field>
        </record>
        
        <record id="view_task_form_teammanager" model="ir.ui.view">
            <field name="name">view.task.form</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2" />
            <field name="priority" eval="100" />
            <field name="groups_id" eval="[(4, ref('project.group_project_team_manager'))]"/>
            <field name="arch" type="xml">
                <xpath expr="//form/sheet/group/group/field[@name='planned_hours']"
                        position="attributes">
                        <attribute name="readonly">False</attribute>
                        <attribute name="attrs">{'readonly': [('state','!=','draft')]}</attribute>
                </xpath>
              </field>
        </record>

		<!-- ccorp.project.scrum.sprint -->
		<!-- form -->
		<record id="view_sprint_form" model="ir.ui.view">
			<field name="name">view.sprint.form</field>
			<field name="model">ccorp.project.scrum.sprint</field>
			<field name="inherit_id" ref="ccorp_project_scrum.view_sprint_form" />
			<field name="arch" type="xml">
				<xpath expr="//form/sheet/notebook/page[@name='tasks']"
					position="after">
					<page string="Planned Tasks" name="desirable_tasks" attrs="{'invisible': [('state','=', 'new')]}">
						<field name="planned_task_ids" attrs="{'invisible': [('state','=', 'new')]}"/>
					</page>
				</xpath>
			</field>
		</record>
        
            <record id="view_reassignment_task_form" model="ir.ui.view">
            <field name="name">view.reassignment.hours.form</field>
            <field name="model">ccorp.project.oerp.reassignment.hours</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Reassignment Task Hours" version="7.0">
                <header>
                <field name="state" widget="statusbar" statusbar_visible="draft,reassignment"
                            statusbar_colors='{"draft":"red","reassignment":"blue"}' />
                        <button name="reassignment_hours" type="object"
                            string="Approve" class="oe_highlight"  attrs="{'invisible': [('state','=', 'reassignment')]}"/>
                </header>
                <sheet>
                  <h3>
                      <span>Reassignment Task Hours</span>
                  </h3>
                    <group>
                            <field name="date" class="oe_inline"  attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            <field name="target_task" class="oe_inline" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            <field name="detail" class="oe_inline" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                            <field name="project_id" attrs="{'invisible': 1}"/>
                            <field name="type_task_id" attrs="{'invisible': 1}"/>
                            <field name="origin_task_ids" attrs="{'readonly': [('state','!=', 'draft')]}">
                               <tree editable="bottom">
                                    <field name="origin_task_id" 
                                           domain="[('project_id','=',parent.project_id),('kind_task_id','=',parent.type_task_id),('remaining_hours','>',0)]"/>
                                    <field name="project_origin_task"/>
                                    <field name="user_origin_task"/>
                                    <field name="ph_origin_task"/>
                                    <field name="rh_origin_task"/>
                                    <field name="reassignment_hour"/>
                               </tree> 
                           </field>
                           <field name="total_time_reassignment" class="oe_inline" attrs="{'readonly': [('state','!=', 'draft')]}"/>
                    </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"
                            groups="base.group_user" />
                        <field name="message_ids" widget="mail_thread" />
                    </div>
                </form>
            </field>
        </record>
        
        <record id="view_reassignment_task_tree" model="ir.ui.view">
            <field name="name">view.reassignment.hours.tree</field>
            <field name="model">ccorp.project.oerp.reassignment.hours</field>
            <field name="priority" eval="16" />
            <field name="arch" type="xml">
                <tree string="Reassignment Task Hours">
                    <field name="date"/>
                    <field name="target_task"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="project_issue_form_view">
            <field name="name">Project Issue Tracker Form</field>
            <field name="model">project.issue</field>
            <field name="inherit_id" ref="project_issue.project_issue_form_view" />
            <field name="arch" type="xml">
            <xpath expr="//form/sheet/group/group/field[@name='user_id']" position="before">
                    <field name="issue_type"/>
                    <field name="work_type_id"/>
            </xpath>
            <xpath expr="//form/sheet/group/group/label[@for='task_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
            </xpath>
            <xpath expr="//form/sheet/group/group/div/field[@name='task_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
            </xpath>
                <xpath expr="//notebook/page[@string='Extra Info']" position="before">
                    <page string="Task Sumary">
                        <field name="task_ids" colspan="4" nolabel="1">
                            <tree editable="top" string="Tasks">
                                 <field name="name"/>
                                 <field name="kind_task_id"/>
                                 <field name="user_id"/>
                            </tree>
                        </field>
                    </page>
                    <page string="Sale Order" attrs="{'invisible':[('issue_type','!=','change_request')]}">
                        <group>
                        <field name="feature_id"/>
                        <field name="saleorderline_id" domain="[('issue_id','=',id)]" />
                        </group>
                    </page>
                </xpath>
            </field>
        </record>
        
     <record id="view_sale_order_issue" model="ir.ui.view">
            <field name="name">view.sale.order.issue</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <field name="arch" type="xml">
            <xpath expr="//form/sheet/notebook/page/field/form/group/group/field[@name='address_allotment_id']" position="after">
                <field name="issue_id" domain="[('saleorderline_id','=',id)]" />
            </xpath>
            </field>
     </record>

        <!-- actions -->
        <!-- ccorp.project.oerp.feature.import.wizard -->
        <record model="ir.actions.act_window" id="action_feature_import_wizard">
            <field name="name">Feature Import</field>
            <field name="res_model">ccorp.project.oerp.feature.import.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <!-- ccorp.project.oerp.task.create.wizard -->
        <record model="ir.actions.act_window" id="action_task_create_wizard">
            <field name="name">Create Tasks from Sequence</field>
            <field name="res_model">ccorp.project.oerp.task.create.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <!-- ccorp.project.oerp.sprint.close.wizard -->
        <record model="ir.actions.act_window" id="action_sprint_close_wizard">
            <field name="name">Close Sprint</field>
            <field name="res_model">ccorp.project.oerp.sprint.close.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>
        
        <!-- ccorp.project.oerp.reassignment.hours.wizard -->
        <record model="ir.actions.act_window" id="action_reassignment">
            <field name="name">Reassignment Task Hours</field>
            <field name="res_model">ccorp.project.oerp.reassignment.hours</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="action_work_type" model="ir.actions.act_window">
            <field name="name">Work Types</field>
            <field name="res_model">ccorp.project.oerp.work.type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
	</data>
</openerp>